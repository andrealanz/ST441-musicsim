---
title: "Sonance"
author: "Andrea Lanz"
date: "11/26/2018"
output: html_document
   keep_md: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(purrr)
```

## Consonace 

 - Which notes sound good together?
 
 - Notes with frequencies with simple ratios
 
 - The different scales are examples of notes with consonant sounds

The purpose of this file is to implement more consonant notes in my simulation of music. 

Read in notes data:
```{r}
full_notes <- (read.csv("data/note_freq.csv")) #includes all parts of dataframe
full_notes
notes <- (read.csv("data/note_freq.csv"))$Frequency..Hz. #just the frequencies
```

The following will assign the sequence of numbers that corresponds to all octaves of a specific note in the frequency data.
```{r}
note_A <- seq(from = 1, to = 85, by = 12)
note_B <- seq(from = 3, to = 87, by = 12)
note_C <- seq(from = 4, to = 88, by = 12)
note_D <- seq(from = 6, to = 78, by = 12)
note_E <- seq(from = 8, to = 80, by = 12)
note_F <- seq(from = 9, to = 81, by = 12)
note_G <- seq(from = 11, to = 83, by = 12)

note_Asharp <- seq(from = 2, to = 86, by = 12)
note_Csharp <- seq(from = 5, to = 77, by = 12)
note_Dsharp <- seq(from = 4, to = 88, by = 12)
note_Fsharp <- seq(from = 4, to = 88, by = 12)
note_Gsharp <- seq(from = 4, to = 88, by = 12)
```

Create a transition matrix for the C major scale (C,D,E,F,G,A):

```{r}
C_major <- notes[c(note_C,note_D, note_E, note_F, note_G, note_A)]
```

```{r}
n <- length(C_major)
P <- list(numeric(n^2))
for(i in 1:n){
   P[i] <- unlist(rerun(n, c(i:n, (i-1):1)), use.names = FALSE)
}
```


```{r}
x <- c(1:44,44:1)
P <- matrix(unlist(rerun(88, exp(x)), use.names = FALSE), 88, 88, byrow = TRUE)
P <- P/rowSums(P)
```


